define("Player",[],function(){function e(){var e=new THREE.TorusKnotGeometry(1,.5,150,18),t=new THREE.MeshPhongMaterial;this.model=new THREE.Mesh(e,t),this.pos=new THREE.Vector3(1,1,2),this.model.position=this.pos,this.model.castShadow=!0,this.model.receiveShadow=!0,this.fired=!1,this.firingCooldown=0}return e.prototype.update=function(){this.firingCooldown>0?this.firingCooldown-=1:this.fired=!1,this.model.position=this.pos},e.prototype.draw=function(){},e.prototype.getModel=function(){return this.model},e.prototype.getPosition=function(){return this.pos},e.prototype.move=function(e,t){this.pos.x+=e,this.pos.y+=t},e.prototype.hasFired=function(){return this.fired},e.prototype.firing=function(){this.firingCooldown=50,this.fired=!0},e}),define("CreatureFactory",["Player"],function(e){function t(){}return t.prototype.spawnPlayer=function(){var t=new e;return t},t}),define("Upgrade",[],function(){function e(e){this.name=e,this.modifier=0,this.multipler=0}return e.prototype.setModifier=function(e){return this.modifier=e,this},e.prototype.getModifier=function(){return this.modifier},e.prototype.setMultiplier=function(e){return this.multipler=e,this},e}),define("UpgradeFactory",["Upgrade"],function(e){function t(){}return t.prototype.spawnTestUpgrade=function(){var t=(new e("test upgrade")).setModifier(.2);return t},t.prototype.spawnTestMultiplier=function(){var t=(new e("test multiplier")).setMultiplier(2);return t},t}),define("Item",[],function(){function e(){}return e}),define("ItemFactory",["Item"],function(e){function t(){}return t}),define("Renderer",[],function(){function e(){this.container=document.getElementById("container"),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(45,this.container.offsetWidth/this.container.offsetHeight,1,4e3),this.animating=!1,this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight),this.renderer.shadowMapEnabled=!0,this.renderer.shadowMapSoft=!0,this.renderer.shadowCameraNear=3,this.renderer.shadowCameraFar=this.camera.far,this.renderer.shadowCameraFov=50,this.renderer.shadowMapBias=.0039,this.renderer.shadowMapDarkness=.5,this.renderer.shadowMapWidth=1024,this.renderer.shadowMapHeight=1024,this.container.appendChild(this.renderer.domElement),this.camera.position.set(0,0,20);var e=new THREE.SpotLight(16777215,.8);e.angle=Math.PI/2,e.castShadow=!0,e.position.set(0,0,100),this.scene.add(e),this.addHandler()}return e.prototype.addHandler=function(){var e=this.renderer.domElement},e.prototype.onMouseUp=function(e){e.preventDefault()},e.prototype.update=function(){},e.prototype.draw=function(){this.renderer.render(this.scene,this.camera)},e}),define("Input",[],function(){function e(){this.keys=[],document.addEventListener("keydown",this.keyDown.bind(this),!1),document.addEventListener("keyup",this.keyUp.bind(this),!1)}return e.prototype.keyDown=function(e){e.preventDefault(),this.keys[e.keyCode]=!0},e.prototype.keyUp=function(e){e.preventDefault(),this.keys[e.keyCode]=!1},e.prototype.isPressed=function(e){return this.keys[e]},e}),define("Projectile",[],function(){function e(e,t,n,r){this.pos=new THREE.Vector3(e.x,e.y,e.z);var i=new THREE.CubeGeometry(.5,.5,.5),s=new THREE.MeshPhongMaterial({color:16711680});this.model=new THREE.Mesh(i,s),this.model.position=this.pos,this.model.castShadow=!0,this.modelreceiveShadow=!0,this.velocity={x:t,y:n,z:r}}return e.prototype.update=function(){this.pos.x+=this.velocity.x,this.pos.y+=this.velocity.y,this.pos.z-this.velocity.z>0&&(this.pos.z+=this.velocity.z),this.velocity.x>this.velocity.y?this.model.rotation.x+=.3:this.model.rotation.y+=.3,this.model.position=this.pos},e.prototype.getModel=function(){return this.model},e}),define("TestWorld",[],function(){function e(){var e=new THREE.PlaneGeometry(40,20),t=new THREE.MeshPhongMaterial({color:7829367});this.model=new THREE.Mesh(e,t),this.model.receiveShadow=!0,this.model.castShadow=!0}return e.prototype.getModel=function(){return this.model},e}),define("Game",["CreatureFactory","UpgradeFactory","ItemFactory","Renderer","Input","Projectile","TestWorld"],function(e,t,n,r,i,s,o){function u(){this.title="derp",this.renderer=new r,this.input=new i,this.cf=new e,this.itf=new n,this.uf=new t,this.world=new o,this.player=this.cf.spawnPlayer(),this.entities=[],this.entities.push(this.player),this.renderer.scene.add(this.player.getModel()),this.renderer.scene.add(this.world.getModel()),this.loop()}return u.prototype.loop=function(){this.update(),this.draw(),requestAnimationFrame(this.loop.bind(this))},u.prototype.draw=function(){this.renderer.draw()},u.prototype.update=function(){this.renderer.update(),this.entities.forEach(function(e){e.update()});var e=null;this.input.isPressed("65")&&this.player.move(-0.1,0),this.input.isPressed("68")&&this.player.move(.1,0),this.input.isPressed("83")&&this.player.move(0,-0.1),this.input.isPressed("87")&&this.player.move(0,.1),this.input.isPressed("37")&&(this.player.model.rotation.y-=.1),this.input.isPressed("39")&&(this.player.model.rotation.y+=.1),this.input.isPressed("38")&&(this.player.model.rotation.x-=.1),this.input.isPressed("40")&&(this.player.model.rotation.x+=.1),this.input.isPressed("37")&&!this.player.hasFired()&&(e=new s(this.player.getPosition(),-0.3,0,-0.03),this.entities.push(e),this.renderer.scene.add(e.getModel()),this.player.firing()),this.input.isPressed("39")&&!this.player.hasFired()&&(e=new s(this.player.getPosition(),.3,0,-0.03),this.entities.push(e),this.renderer.scene.add(e.getModel()),this.player.firing()),this.input.isPressed("38")&&!this.player.hasFired()&&(e=new s(this.player.getPosition(),0,.3,-0.03),this.entities.push(e),this.renderer.scene.add(e.getModel()),this.player.firing()),this.input.isPressed("40")&&!this.player.hasFired()&&(e=new s(this.player.getPosition(),0,-0.3,-0.03),this.entities.push(e),this.renderer.scene.add(e.getModel()),this.player.firing())},u}),require(["Game"],function(e){(function(){function t(){var t=new e}t()})()}),define("main",function(){});